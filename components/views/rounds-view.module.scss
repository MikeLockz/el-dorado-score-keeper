@use '../../styles/mixins/state' as state;
@use '../../styles/mixins/typography' as typography;
@use '../../styles/tokens/spacing' as spacing;

.root {
  padding: spacing.spacing('space-2');
  max-inline-size: 28rem;
  margin-inline: auto;
  display: flex;
  flex-direction: column;
  gap: spacing.spacing('space-2');
}

.title {
  @include typography.heading('heading-sm');
  margin-block-end: spacing.spacing('space-2');
  text-align: center;
}

.card {
  overflow: hidden;
  box-shadow: 0 12px 32px rgba(15, 23, 42, 0.12);
  border-radius: var(--radius-lg);
}

.gridHeader {
  display: grid;
  font-size: 0.65rem;
  color: var(--color-surface-muted-foreground, var(--muted-foreground));
  background: var(--color-surface-muted, var(--muted));
  font-weight: 700;
  text-align: center;
}

.gridHeaderCell {
  padding: spacing.spacing('space-1');
  border-bottom: 1px solid var(--border);
  border-right: 1px solid var(--border);
}

.gridHeaderCell:last-child {
  border-right: none;
}

.bidLabel {
  font-size: 0.6rem;
  font-weight: 600;
  color: var(--color-status-bidding-foreground);
}

.bidCurrent {
  font-size: 0.65rem;
  font-weight: 600;
  color: var(--color-status-bidding-foreground);
  inline-size: 2rem;
  text-align: center;
}

.roundRow {
  display: grid;
  transition: transform 160ms ease;
}

.roundCell {
  padding: spacing.spacing('space-1');
  border-bottom: 1px solid var(--border);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: spacing.spacing('space-1');
  cursor: pointer;
  transition: background-color 160ms ease, color 160ms ease;
}

.roundStateValue {
  font-size: 0.9rem;
  font-weight: 700;
}

.roundStateLabel {
  font-size: 0.55rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.roundStateLocked {
  background: var(--color-status-locked);
  color: var(--color-status-locked-foreground);
}

.roundStateBidding {
  background: var(--color-status-bidding);
  color: var(--color-status-bidding-foreground);
  box-shadow: 0 6px 18px rgba(15, 23, 42, 0.18);
}

.roundStateComplete {
  background: var(--color-status-complete);
  color: var(--color-status-complete-foreground);
}

.roundStateScored {
  background: var(--color-status-scored);
  color: var(--color-status-scored-foreground);
}

.playerCell {
  border-bottom: 1px solid var(--border);
  display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: repeat(2, minmax(0, 1fr));
  transition: background-color 200ms ease;
}

.playerCellLocked {
  background: color-mix(in oklch, var(--color-status-locked) 12%, var(--card));
}

.playerCellBidding {
  background: color-mix(in oklch, var(--color-status-bidding) 12%, var(--card));
}

.playerCellComplete {
  background: color-mix(in oklch, var(--color-status-complete) 12%, var(--card));
}

.playerCellScored {
  background: color-mix(in oklch, var(--color-status-scored) 14%, var(--card));
}

.placeholderRow,
.infoRow {
  display: flex;
  align-items: center;
  justify-content: center;
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  font-size: 0.6rem;
}

.placeholderRow {
  border-bottom: 1px solid color-mix(in oklch, var(--border) 92%, transparent);
  color: var(--muted-foreground);
}

.infoRow {
  color: var(--muted-foreground);
}

.bidControls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  border-bottom: 1px solid color-mix(in oklch, var(--border) 90%, transparent);
}

.bidButton {
  inline-size: 1.25rem;
  block-size: 1.25rem;
  min-inline-size: 0;
  min-block-size: 0;
  min-height: 0;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in oklch, var(--color-status-bidding) 45%, transparent);
  background: color-mix(in oklch, var(--card) 85%, transparent);
  color: var(--color-status-bidding-foreground);
  transition: background-color 160ms ease, color 160ms ease;

  &:hover:not(:disabled) {
    background: color-mix(in oklch, var(--color-status-bidding) 25%, transparent);
  }

  &:focus-visible {
    @include state.focus-ring(var(--color-status-bidding));
  }

  &:disabled {
    opacity: 0.5;
  }
}

.bidValue {
  font-size: 0.7rem;
  font-weight: 700;
  min-inline-size: 1.5rem;
  text-align: center;
  color: var(--color-status-bidding-foreground);
  background: color-mix(in oklch, var(--card) 80%, transparent);
  border-radius: var(--radius-sm);
  padding-inline: 0.25rem;
  padding-block: 0.125rem;
}

.bidSummary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  font-size: 0.6rem;
  color: var(--color-status-bidding-foreground);
  font-weight: 600;
}

.completeSummary {
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  font-size: 0.6rem;
  font-weight: 600;
  color: var(--color-status-complete-foreground);
  border-bottom: 1px solid color-mix(in oklch, var(--border) 92%, transparent);
}

.completeControls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: spacing.spacing('space-2');
  padding-block: 0.25rem;
}

.completeButton {
  inline-size: 1.5rem;
  block-size: 1.5rem;
  min-inline-size: 0;
  min-block-size: 0;
  min-height: 0;
  border-radius: var(--radius-sm);
  border: 1px solid color-mix(in oklch, var(--color-status-complete) 45%, transparent);
  background: color-mix(in oklch, var(--card) 80%, transparent);
  color: var(--color-status-complete-foreground);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  transition: background-color 160ms ease, color 160ms ease;

  &:hover:not(:disabled) {
    background: color-mix(in oklch, var(--color-status-complete) 25%, transparent);
  }

  &:focus-visible {
    @include state.focus-ring(var(--color-status-complete));
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
}

.completeButtonActive {
  background: var(--color-status-complete);
  color: var(--color-status-complete-foreground);
}

.completeButtonMiss {
  border-color: var(--destructive);
  background: var(--destructive);
  color: var(--destructive-foreground);
}

.scoredSummary {
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  border-bottom: 1px solid color-mix(in oklch, var(--border) 92%, transparent);
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 0.6rem;
  font-weight: 600;
  color: var(--color-status-scored-foreground);
}

.scoredTotals {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-inline: spacing.spacing('space-1');
  padding-block: 0.25rem;
  font-size: 0.65rem;
  font-weight: 700;
  color: var(--color-status-scored-foreground);
}

.scoredValuePositive {
  color: var(--color-status-scored-foreground);
}

.scoredValueNegative {
  color: var(--destructive);
}

.scoreTotal {
  font-weight: 700;
}

.iconSmall {
  inline-size: 0.75rem;
  block-size: 0.75rem;
}

.iconTiny {
  inline-size: 0.6rem;
  block-size: 0.6rem;
}
